(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d2cfb2aa"],{8319:function(t,o,e){},a316:function(t,o,e){"use strict";e.r(o);var i=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticStyle:{"min-height":"60vh"},on:{mousemove:function(o){return t.showToolbar(o)}}},[e("div",{staticClass:"toolbar-box",class:t.isEdit?"":"hide-toolbar"},[e("div",{staticClass:"toolbar-item"},[e("el-tooltip",{attrs:{content:"页面配置",placement:"top"}},[e("oh-button",{attrs:{icon:"settings",circle:""},on:{click:function(o){t.editPageDialog=!0}}})],1)],1),e("div",{staticClass:"toolbar-item divider"},[e("el-tooltip",{attrs:{content:"图库",placement:"top"}},[e("oh-button",{attrs:{icon:"photo_album",circle:""},on:{click:function(o){t.editPageDialog=!0}}})],1)],1),e("div",{staticClass:"toolbar-item"},[e("el-tooltip",{attrs:{content:"编辑"}},[e("oh-button",{attrs:{icon:"edit",active:!!t.isEdit,circle:""},on:{click:function(o){t.isEdit=!0}}})],1)],1),e("div",{staticClass:"toolbar-item"},[e("el-tooltip",{attrs:{content:"新增模块"}},[e("oh-button",{attrs:{icon:"add_circle",circle:""},on:{click:t.newGrid}})],1)],1),e("div",{staticClass:"toolbar-item"},[e("el-tooltip",{attrs:{content:"新建组件"}},[e("oh-button",{attrs:{icon:"add_to_photos",circle:""},on:{click:function(o){t.innerDrawer=!0}}})],1)],1),e("div",{staticClass:"toolbar-item divider"},[e("el-tooltip",{attrs:{content:"预览"}},[e("oh-button",{attrs:{icon:"visibility",active:!t.isEdit,circle:""},on:{click:t.preview}})],1)],1),e("div",{staticClass:"toolbar-item"},[e("el-tooltip",{attrs:{content:"暂存"}},[e("oh-button",{attrs:{icon:"save",circle:""},on:{click:t.saveLayout}})],1)],1),e("div",{staticClass:"toolbar-item"},[e("el-tooltip",{attrs:{content:"发布"}},[e("oh-button",{attrs:{icon:"done_all",circle:""}})],1)],1)]),e("grid-layout",{staticClass:"showViews",class:{hideViews:!t.isEdit},attrs:{layout:t.layout,"col-num":24,"row-height":1,"is-draggable":!!t.isEdit,"is-resizable":!!t.isEdit,"is-mirrored":!1,"vertical-compact":!0,margin:[16,16],"use-css-transforms":!!t.isEdit},on:{"update:layout":function(o){t.layout=o}}},t._l(t.layout,function(o,i){return e("grid-item",{key:o.i,class:t.isEdit?"grid-item-edit":"",attrs:{x:o.x,y:o.y,w:o.w,h:o.h,i:o.i,minH:o.minH}},[t.isEdit?e("div",{staticClass:"option"},[e("el-tooltip",{attrs:{content:"选择组件"}},[e("oh-button",{attrs:{icon:"memory",circle:"",size:"mini"},on:{click:function(e){return t.updateComponent(o.i)}}})],1),e("el-tooltip",{attrs:{content:"编辑源码"}},[e("oh-button",{attrs:{icon:"code",circle:"",size:"mini"},on:{click:function(e){return t.editComponent(o.code,o.i)}}})],1),e("el-popconfirm",{attrs:{title:"确定删除该模块？",placement:"top",icon:"el-icon-warning",iconColor:"red"},on:{onConfirm:function(o){return t.delGrid(i)}}},[e("el-tooltip",{attrs:{slot:"reference",content:"删除"},slot:"reference"},[e("oh-button",{attrs:{icon:"delete",circle:"",size:"mini"}})],1)],1),e("el-tooltip",{attrs:{content:"复制"}},[e("oh-button",{attrs:{icon:"content_copy",circle:"",size:"mini"},on:{click:function(e){return t.cloneGrid(o)}}})],1)],1):t._e(),o.code?e("custom-component",{attrs:{code:o.code}}):t._e()],1)}),1),e("el-dialog",{attrs:{visible:t.dialogVisible,top:"6vh",fullscreen:!!t.editorFullscreen,width:"90%"},on:{"update:visible":function(o){t.dialogVisible=o}}},[e("div",{staticClass:"dialog-header"},[e("div",{staticClass:"dialog-title"},[t._v("编辑源码")]),e("div",{staticClass:"option-group"},[e("oh-button",{attrs:{circle:"",icon:t.editorFullscreen?"fullscreen_exit":"fullscreen",size:"mini"},on:{click:function(o){t.editorFullscreen=!t.editorFullscreen}}}),e("oh-button",{attrs:{circle:"",icon:"close",size:"mini"},on:{click:function(o){t.dialogVisible=!1}}})],1)]),e("div",{staticClass:"dialog-content"},[e("code-editor",{attrs:{maxHeight:t.editorFullscreen?"calc(100vh - 114px)":"calc(100vh - 200px)",code:t.code},on:{input:t.setCode,change:t.setCode}})],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("oh-button",{attrs:{type:"flat"},on:{click:function(o){t.dialogVisible=!1}}},[t._v("取消")]),e("oh-button",{attrs:{type:"primary"},on:{click:t.saveComponent}},[t._v("保存")])],1)]),e("el-drawer",{attrs:{visible:t.componentsDrawer,"with-header":!1,size:"24%"},on:{"update:visible":function(o){t.componentsDrawer=o}}},[e("fab-button",{attrs:{pos:{bottom:"24",right:"24"},icon:"add"},on:{click:function(o){t.innerDrawer=!0}}}),e("components-settings",{on:{updateCode:t.updateCode}})],1),e("el-drawer",{attrs:{"with-header":!1,"append-to-body":!0,visible:t.innerDrawer,size:"25%"},on:{"update:visible":function(o){t.innerDrawer=o}}},[e("div",{staticStyle:{padding:"16px","box-sizing":"border-box"}},[e("oh-input",{staticStyle:{"margin-bottom":"16px"},attrs:{placeholder:"组件名称",large:"","auto-focus":"",clearable:""},model:{value:t.compTitle,callback:function(o){t.compTitle=o},expression:"compTitle"}}),e("el-upload",{attrs:{action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture-card"}},[e("i",{staticClass:"el-icon-plus"})]),t._v("\n            组件源码\n            "),e("code-editor",{attrs:{code:t.emptyTemplate,maxHeight:"40vh"},on:{input:t.setCode,change:t.setCode}}),e("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[e("oh-button",{attrs:{type:"flat"},on:{click:function(o){t.dialogVisible=!1}}},[t._v("取消")]),e("oh-button",{attrs:{type:"primary"},on:{click:t.saveComponent}},[t._v("确定")])],1)],1)]),e("oh-dialog",{attrs:{title:"新建页面",visible:t.newPageDialog},on:{"update:visible":function(o){t.newPageDialog=o}}},[e("form",{attrs:{action:""}},[e("oh-form-item",{attrs:{icon:"title",label:"页面名称"}},[e("oh-input",{attrs:{placeholder:"页面名称",large:"","auto-focus":"",clearable:""},model:{value:t.pageTitle,callback:function(o){t.pageTitle=o},expression:"pageTitle"}})],1),e("oh-form-item",{attrs:{icon:"vpn_key",label:"页面ID"}},[e("oh-input",{attrs:{placeholder:"页面ID",clearable:""},model:{value:t.pageId,callback:function(o){t.pageId=o},expression:"pageId"}})],1),e("oh-form-item",{attrs:{icon:"link",label:"页面路由"}},[e("oh-input",{attrs:{placeholder:"路由地址",readonly:""},model:{value:t.pagePath,callback:function(o){t.pagePath=o},expression:"pagePath"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("oh-button",{attrs:{type:"flat"},on:{click:function(o){t.newPageDialog=!1}}},[t._v("取消")]),e("oh-button",{attrs:{type:"primary"},on:{click:t.newPage}},[t._v("确定")])],1)]),e("oh-dialog",{attrs:{title:"页面配置",visible:t.editPageDialog},on:{"update:visible":function(o){t.editPageDialog=o}}},[e("form",{attrs:{action:""},model:{value:t.pageInfo,callback:function(o){t.pageInfo=o},expression:"pageInfo"}},[e("oh-form-item",{attrs:{icon:"title",label:"页面名称"}},[e("oh-input",{attrs:{placeholder:"页面名称",large:"","auto-focus":"",clearable:""},model:{value:t.pageInfo.title,callback:function(o){t.$set(t.pageInfo,"title",o)},expression:"pageInfo.title"}})],1),e("oh-form-item",{attrs:{icon:"vpn_key",label:"页面ID"}},[e("oh-input",{attrs:{placeholder:"页面ID",clearable:""},model:{value:t.pageInfo.id,callback:function(o){t.$set(t.pageInfo,"id",o)},expression:"pageInfo.id"}})],1),e("oh-form-item",{attrs:{icon:"link",label:"页面路由"}},[e("oh-input",{attrs:{placeholder:"页面路由",readonly:""},model:{value:t.pageInfo.path,callback:function(o){t.$set(t.pageInfo,"path",o)},expression:"pageInfo.path"}})],1),e("oh-form-item",{attrs:{icon:"dashboard",label:"保存为模板",divider:""}},[e("ohSwitch",{attrs:{label:"添加至模板库"},model:{value:t.pageInfo.addToTemplate,callback:function(o){t.$set(t.pageInfo,"addToTemplate",o)},expression:"pageInfo.addToTemplate"}})],1),t.pageInfo.addToTemplate?e("oh-form-item",{attrs:{icon:"confirmation_number",label:"模板名称"}},[e("oh-input",{attrs:{placeholder:"模板名称","auto-focus":""},model:{value:t.pageInfo.templateName,callback:function(o){t.$set(t.pageInfo,"templateName",o)},expression:"pageInfo.templateName"}})],1):t._e()],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("oh-button",{attrs:{type:"flat"},on:{click:function(o){t.editPageDialog=!1}}},[t._v("取消")]),e("oh-button",{attrs:{type:"primary"},on:{click:function(o){t.editPageDialog=!1}}},[t._v("确定")])],1)])],1)},a=[],n=(e("ac6a"),e("7be8")),l=e.n(n),c=e("5d93"),s={components:{GridLayout:l.a.GridLayout,GridItem:l.a.GridItem},data:function(){return{compTitle:"",pageTitle:"",pageId:"",pagePath:"/misIndex/index_19?id=19",pageInfo:{title:"领导首页",id:"MIS_INDEX_LD",path:"/misIndex/index_19?id=19",addToTemplate:!1,templateName:""},dialogVisible:!1,editorFullscreen:!1,componentsDrawer:!1,innerDrawer:!1,newPageDialog:!1,editPageDialog:!1,toDoList:{},isEdit:!0,code:"",key:"",emptyTemplate:c["a"],layout:[{x:0,y:0,w:6,h:18,i:"0",minH:8,code:c["a"]}]}},mounted:function(){this.initLayout()},methods:{preview:function(){this.isEdit=!1},showToolbar:function(t){0==t.pageX&&(this.isEdit=!0)},newPage:function(){var t=this;this.newPageDialog=!1,setTimeout(function(){t.layout=[{x:0,y:0,w:6,h:18,i:"0",minH:8,code:c["a"]}]},200)},newGrid:function(){var t=Math.max.apply(Math,this.layout.map(function(t){return t.i}));this.layout.push({x:0,y:24,w:6,h:10,minH:8,i:t+1,code:c["a"]})},delGrid:function(t){this.layout.splice(t,1)},cloneGrid:function(t){var o=Math.max.apply(Math,this.layout.map(function(t){return t.i}));this.layout.push({x:t.x,y:t.y,w:t.w,h:t.h,minH:8,i:o+1,component:t.component,code:t.code})},editComponent:function(t,o){this.dialogVisible=!0,this.key=o,this.code=t},saveComponent:function(){var t=this;this.dialogVisible=!1,this.layout.forEach(function(o){o.i==t.key&&(o.code=t.code)})},setCode:function(t){this.code=t},updateComponent:function(t){this.componentsDrawer=!0,this.key=t},updateCode:function(t){var o=this;this.layout.forEach(function(e){e.i==o.key&&(e.code=t)})},initLayout:function(){var t=localStorage.getItem("layout")||this.layout;this.layout=JSON.parse(t)},saveLayout:function(){var t=this;window.localStorage.setItem("layout",JSON.stringify(this.layout)),console.log(this.layout),setTimeout(function(){t.$notify({title:"成功",message:"页面保存成功",type:"success",duration:1500})},300)}}},r=s,d=(e("a6d9"),e("2877")),u=Object(d["a"])(r,i,a,!1,null,null,null);o["default"]=u.exports},a6d9:function(t,o,e){"use strict";var i=e("8319"),a=e.n(i);a.a}}]);
//# sourceMappingURL=chunk-d2cfb2aa.0f802e65.js.map